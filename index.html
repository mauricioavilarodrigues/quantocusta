<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>quantocusta</title>
</head>
<body>
  <h1>quantocusta</h1>

  <input id="busca" placeholder="Buscar produto...">
  <button onclick="buscar()">Buscar</button>

  <ul id="resultado"></ul>

  <script>
    async function buscar() {
      const termo = document.getElementById("busca").value.toLowerCase();
      const res = await fetch("data.json");
      const data = await res.json();

      const lista = document.getElementById("resultado");
      lista.innerHTML = "";

      data.produtos
        .filter(p => p.nome.toLowerCase().includes(termo))
        .sort((a, b) => a.preco - b.preco)
        .forEach(p => {
          const li = document.createElement("li");
          li.innerText = `${p.nome} - R$ ${p.preco.toFixed(2)} - ${p.loja}`;
          lista.appendChild(li);
        });
    }
  </script<script>
let nichoAtual = "supermercado";

function setNicho(nicho) {
  nichoAtual = nicho;
  document.getElementById("resultado").innerHTML = "";
}

async function buscar() {
  const termo = document.getElementById("busca").value.toLowerCase();
  const res = await fetch("data.json");
  const data = await res.json();

  const lista = document.getElementById("resultado");
  lista.innerHTML = "";

  const itens = data[nichoAtual];

  itens
    .filter(p => p.nome.toLowerCase().includes(termo))
    .sort((a,b) => a.preco - b.preco)
    .forEach((p,i) => {
      const li = document.createElement("li");

      const local = p.loja || p.posto;
      const destaque = i === 0 ? " ‚≠ê MENOR PRE√áO" : "";

      li.innerText = `${p.nome} - R$ ${p.preco} - ${local}${destaque}`;
      lista.appendChild(li);
    });
}
</script>
<h1>quantocusta</h1>

<div>
  <button onclick="setNicho('supermercado')">üõí Supermercado</button>
  <button onclick="setNicho('combustivel')">‚õΩ Combust√≠vel</button>
</div>

<br>

<input id="busca" placeholder="Buscar produto...">
<button onclick="buscar()">Buscar</button>

<ul id="resultado"></ul>

</html>
