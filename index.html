<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>quantocusta</title>
</head>

<body>
  <h1>quantocusta</h1>

  <div>
    <button onclick="setNicho('supermercado')">üõí Supermercado</button>
    <button onclick="setNicho('combustivel')">‚õΩ Combust√≠vel</button>
  </div>

  <br>

  <input id="busca" placeholder="Buscar produto...">
  <button onclick="buscar()">Buscar</button>

  <ul id="resultado"></ul>

  <script>
    let nichoAtual = "supermercado";

    function setNicho(nicho) {
      nichoAtual = nicho;
      buscar();
    }

    async function buscar() {
      const termo = document.getElementById("busca").value.toLowerCase();
      const res = await fetch("data.json");
      const data = await res.json();

      const lista = document.getElementById("resultado");
      lista.innerHTML = "";

      const itens = data[nichoAtual];

      if (!itens) {
        lista.innerHTML = "<li>Nenhum dado encontrado.</li>";
        return;
      }

      const filtrados = itens.filter(p =>
        p.nome.toLowerCase().includes(termo)
      );

      filtrados
        .sort((a, b) => a.preco - b.preco)
        .forEach((p, i) => {
          const li = document.createElement("li");
          const local = p.loja || p.posto;
          const destaque = i === 0 ? " ‚≠ê MENOR PRE√áO" : "";

          li.innerText = `${p.nome} - R$ ${p.preco.toFixed(2)} - ${local}${destaque}`;
          lista.appendChild(li);
        });
    }
  </script>

</<h1>quantocusta</h1>

<div>
  <button onclick="setNicho('supermercado')">üõí Supermercado</button>
  <button onclick="setNicho('combustivel')">‚õΩ Combust√≠vel</button>
</div>

<div id="filtroCombustivel" style="display:none;">
  <button onclick="setTipo('Comum')">Comum</button>
  <button onclick="setTipo('Aditivada')">Aditivada</button>
</div>
>
</html<div id="filtroCombustivel" style="display:none;">
  <button onclick="setTipo('Comum')">Comum</button>
  <button onclick="setTipo('Aditivada')">Aditivada</button>
</div>
>
